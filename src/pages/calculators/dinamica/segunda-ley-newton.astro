---
import CalculatorLayout from "../../../layouts/CalculatorLayout.astro";
import CalculatorHeader from "../../../components/calculator/CalculatorHeader.astro";
import VariableSelector from "../../../components/calculator/VariableSelector.astro";
import InputGroup from "../../../components/calculator/InputGroup.astro";
import ResultDisplay from "../../../components/calculator/ResultDisplay.astro";
import FormulasContainer from "../../../components/calculator/FormulasContainer.astro";
import FormulaItem from "../../../components/calculator/FormulaItem.astro";
import MultipleForces from "../../../components/calculator/MultipleForces.astro";
import InfoMessage from "../../../components/calculator/InfoMessage.astro";

import {  UNITS, NEWTON_SECOND_LAW_CONFIG, NEWTON_ADVANCED_VARIABLES, NEWTON_ADVANCED_FORMULAS } from "../../../constants/calculator";
import '../../../styles/mcu.css';
import '../../../styles/calculator-components.css';
---
<CalculatorLayout title={NEWTON_SECOND_LAW_CONFIG.title} description={NEWTON_SECOND_LAW_CONFIG.description} icon="⚖️">
  <h1>{NEWTON_SECOND_LAW_CONFIG.title}</h1>
  
  <!-- Enlace a la calculadora especializada -->
  <div class="specialized-calculator-link">
    <InfoMessage type="info">
      💡 <strong>¿Necesitas analizar múltiples fuerzas?</strong> 
      <a href="/calculators/dinamica/multiples-fuerzas" class="specialized-link">
        Prueba nuestra Calculadora de Múltiples Fuerzas
      </a> 
      diseñada específicamente para este tipo de problemas.
    </InfoMessage>
  </div>
  
  <!-- <InfoMessage type="info">
    Esta calculadora utiliza la nueva interfaz modular con estilos mejorados y mayor accesibilidad.
  </InfoMessage> -->
  
  <p>
    
  </p>
  
  <div class="calculator-container">
    <div class="calculator">
      <CalculatorHeader 
        title={NEWTON_SECOND_LAW_CONFIG.title} 
        description={NEWTON_SECOND_LAW_CONFIG.calculatorDescription}
        icon="🔄"
      />
      
      <div class="calculator-body">
        <VariableSelector 
          options={NEWTON_ADVANCED_VARIABLES} 
          label="Variable a calcular:"
        />
        
        <div class="input-groups-container">
          <InputGroup 
            id="mass"
            label="Masa (m):"
            placeholder="Ingresa la masa"
            units={UNITS.mass}
          />
          <InputGroup 
            id="acceleration"
            label="Aceleración (a):"
            placeholder="Ingresa la aceleración"
            units={UNITS.acceleration}
          />
          <InputGroup 
            id="force"
            label="Fuerza (F):"
            placeholder="Ingresa la fuerza"
            units={UNITS.force}
          />
          <InputGroup 
            id="angle"
            label="Ángulo (θ):"
            placeholder="Ingresa el angulo"
            units={UNITS.angle}
          />
          <InputGroup 
            id="coefficient"
            label="Coeficiente(μ):"
            placeholder="Ingresa el coeficiente"
            units={UNITS.coefficient}
          />
          <InputGroup 
            id="friction-force"
            label="Fuerza de fricción (Ff):"
            placeholder="Ingresa la fuerza de fricción"
            units={UNITS.force}
          />
          <InputGroup 
            id="normal-force"
            label="Fuerza normal (N):"
            placeholder="Ingresa la fuerza normal"
            units={UNITS.force}
          />
          <InputGroup 
            id="gravity"
            label="Gravedad (g):"
            placeholder="Ingresa la gravedad"
            units={UNITS.acceleration}
          />
          <InputGroup 
            id="net-force"
            label="Fuerza neta (Fn):"
            placeholder="Ingresa la fuerza neta"
            units={UNITS.force}
          />
          <InputGroup 
            id="resultant-force"
            label="Fuerza resultante (Fr):"
            placeholder="Ingresa la fuerza resultante"
            units={UNITS.force}
          />
          <InputGroup 
            id="weight"
            label="Peso (P):"
            placeholder="Ingresa el peso"
            units={UNITS.force}
          />
          <InputGroup 
            id="forceX",
            label="Fuerza componente X (Fx):"
            placeholder="Ingresa la fuerza en el componente X"
            units={UNITS.force}          
          />

          <InputGroup 
            id="forceY"
            label="Fuerza en el componente Y (Fy):"
            placeholder="Ingresa la fuerza en el componente Y"
            units={UNITS.force}
          />

          <InputGroup 
            id="applied-force",
            label="Fuerza aplicada (Fa):"
            placeholder="Ingresa la fuerza aplicada"
            units={UNITS.force}          
          />   
          
          <InputGroup 
            id="friction-coefficient",
            label="Coeficiente de fricción (μ):"
            placeholder="Ingresa el coeficiente de fricción"
            units={UNITS.coefficient}          
          />     
          
          <InputGroup 
            id="radius"
            label="Radio (r):"
            placeholder="Ingresa el radio del planeta"
            units={UNITS.radius}          
          />

          <InputGroup
            id="time"
            label="Tiempo (t):"
            placeholder="Ingresa el tiempo"
            units={UNITS.time}
          />

          <InputGroup
            id="mass1"
            label="Masa 1 (m1):"
            placeholder="Ingresa la masa 1"
            units={UNITS.mass}
          />

          <InputGroup
            id="mass2"
            label="Masa 2 (m2):"
            placeholder="Ingresa la masa 2"
            units={UNITS.mass}
          />
          <InputGroup
            id="angle1"
            label="Ángulo 1 (θ1):"
            placeholder="Ingresa el ángulo 1"
            units={UNITS.angle}
          />
          <InputGroup
            id="angle2"
            label="Ángulo 2 (θ2):"
            placeholder="Ingresa el ángulo 2"
            units={UNITS.angle}
          />
          <InputGroup
            id="frictionCoefficient1"
            label="Coeficiente de fricción 1 (μ1):"
            placeholder="Ingresa el coeficiente de fricción 1"
            units={UNITS.coefficient}
          />
          <InputGroup
            id="frictionCoefficient2"
            label="Coeficiente de fricción 2 (μ2):"
            placeholder="Ingresa el coeficiente de fricción 2"
            units={UNITS.coefficient}
          />
        </div>
        
        <button id="calculate-btn" class="calculate-button">Calcular</button>       
        <ResultDisplay showCopyButton={true} />
      </div>
    </div>
    
    <FormulasContainer 
      title="Fórmulas de la Segunda Ley de Newton"
      icon="📊"
    >
      
      {NEWTON_ADVANCED_FORMULAS.map(formula => (
        <FormulaItem 
          formula={formula.formula} 
          description={formula.description}
          example={formula.example} 
        />
      ))}
    </FormulasContainer>
  </div>

  <style>
    .specialized-calculator-link {
      margin: 1.5rem 0;
    }

    .specialized-link {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      transition: all 0.2s ease;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
      border: 1px solid rgba(102, 126, 234, 0.2);
      display: inline-block;
    }

    .specialized-link:hover {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      transform: translateY(-1px);
      box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
    }

    .specialized-calculator-link .info-message {
      border-left: 4px solid #667eea;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
    }
  </style>

  <script>
    import { setupCalculator } from "../../../utils/calculators/calculator-controller";
    import { calculateNewton, calculateNetForceFromMultiple } from "../../../utils/calculators/dinamica/segunda-ley/segunda-ley-calculator";
    import { NEWTON_SECOND_LAW_CONFIG } from "../../../constants/calculator";
    import { initResponsiveUtils } from "../../../utils/responsive-utils";
    
    document.addEventListener('DOMContentLoaded', function() {
      // Configurar la calculadora Newton
      setupCalculator({
        calculateFunction: calculateNewton,
        variableGroups: NEWTON_SECOND_LAW_CONFIG.variableGroups
      });
      
      
      // Inicializar utilidades responsivas
      initResponsiveUtils();
    });
  </script>
</CalculatorLayout>
